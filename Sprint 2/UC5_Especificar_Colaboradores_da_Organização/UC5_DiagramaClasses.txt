@startuml

title UC5 - ESPECIFICAR COLABORADOR DE ORGANIZAÇÃO

actor GestorOrganizacao as GestorOrganizacao
GestorOrganizacao -> "AreaGestorUI" : 1 Introduz os dados solicitados
activate "AreaGestorUI"
"AreaGestorUI" -> "RegistarColaboradorController" : 2 registarColaborador(String nomeColaborador, int contactoColaborador, String emailColaborador, String gestorEmail)
activate "RegistarColaboradorController"
"RegistarColaboradorController" -> ":Plataforma" : 3 plat = Plataforma.getInstance()
activate ":Plataforma"
deactivate ":Plataforma"
"RegistarColaboradorController" -> "ro:RepositorioOrganizacao" : 4 repoOrg = plat.getRepoOrg()
activate "ro:RepositorioOrganizacao"
deactivate "ro:RepositorioOrganizacao"
"RegistarColaboradorController" -> "rc:RepositorioColaborador" : 5 repoColab = plat.getRepoColab()
activate "rc:RepositorioColaborador"
deactivate "rc:RepositorioColaborador"
"RegistarColaboradorController" -> "rc:RepositorioColaborador" : 6 gestor = getColaboradorByEmail(gestorEmail)
activate "rc:RepositorioColaborador"
deactivate "rc:RepositorioColaborador"
"RegistarColaboradorController" -> "ro:RepositorioOrganizacao" : 13 org = getOrganizacaoByGestor(gestor)
"RegistarColaboradorController" -> "rc:RepositorioColaborador" : colaborador = repoColab.criarColaborador(nomeColaborador, contactoColaborador, emailColaborador, org)

"rc:RepositorioColaborador" -> Colaborador** : criarColaborador(nomeColaborador, contactoColaborador, emailColaborador, org)

"RegistarColaboradorController" -> "rc:RepositorioColaborador" : addColaborador(colaborador)

activate "rc:RepositorioColaborador"

"rc:RepositorioColaborador" -> Telefone : 14 create(telefone)
activate Telefone
deactivate Telefone
"rc:RepositorioColaborador" -> Email : 15 create(email)
activate Email
deactivate Email
"rc:RepositorioColaborador" -> Colaborador ** : 16 create(nomeGestor, telefoneGestor, emailGestor, org, Funcao.GESTOR)
deactivate "rc:RepositorioColaborador"
"RegistarColaboradorController" -> "ro:RepositorioOrganizacao" : 17 addOrganizacao(org)
activate "ro:RepositorioOrganizacao"
"RegistarColaboradorController" <-- "ro:RepositorioOrganizacao" : 18 ok
deactivate "ro:RepositorioOrganizacao"
"RegistarColaboradorController" -> "ro:RepositorioOrganizacao" : 19 addGestor(gestor, org)
activate "ro:RepositorioOrganizacao"
"RegistarColaboradorController" <-- "ro:RepositorioOrganizacao" : 20 ok
deactivate "ro:RepositorioOrganizacao"
"RegistarColaboradorController" -> "rc:RepositorioColaborador" : 21 addColaborador(gestor)
activate "rc:RepositorioColaborador"
"RegistarColaboradorController" <-- "rc:RepositorioColaborador" : 22 ok
deactivate "rc:RepositorioColaborador"
ref over RegistarColaboradorController, Colaborador : UC1_SD_RegistarGestorComoUtilizador
deactivate "RegistarColaboradorController"
"AreaGestorUI" --> GestorOrganizacao : 23 operação bem sucedida, \n mostra dados
deactivate "AreaGestorUI"

@enduml