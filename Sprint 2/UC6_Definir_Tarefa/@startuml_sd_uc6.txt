@startuml_sd_uc6

title UC6 - Diagrama de sequência

actor Colaborador
participant UI
participant CTRL
participant Plataforma
participant rc_RegistoCategorias
participant ro_RegistoOrganizacoes
participant rt_RegistoTarefas
participant o_Organizacao
participant rc_RegistoColaboradores
participant t_Tarefa

activate Colaborador

Colaborador -> UI: 1 Inicia a especificação de uma tarefa
activate UI
activate CTRL
UI -> CTRL: 1.1 lc=getListaCategorias()
CTRL -> Plataforma: 1.1.1 rc=getRegistoCategorias()
activate Plataforma
deactivate Plataforma

CTRL -> rc_RegistoCategorias: 1.1.2 lc=getListaCategorias()
activate rc_RegistoCategorias
deactivate rc_RegistoCategorias
UI --> Colaborador: 1.2 Solicita dados
deactivate UI
deactivate CTRL

Colaborador -> UI: 2 Introduz dados
activate UI
activate CTRL
UI -> CTRL: 2.1 novaTarefa(ref, designacao, descrInformal, descrTecnica, duracao, custo, catCod)
UI --> Colaborador: 2.2 Apresenta dados e solicita confirmação

deactivate UI


ref over CTRL, Plataforma, rc_RegistoCategorias, ro_RegistoOrganizacoes, rt_RegistoTarefas, o_Organizacao, rc_RegistoColaboradores: 2.1.1 email=getMyEmail()


CTRL -> Plataforma: 2.1.2 ro=getRegistoOrganizacoes()
activate Plataforma
deactivate Plataforma

CTRL -> ro_RegistoOrganizacoes: 2.1.3 o=getOrganizacaoByEmailUtilizador(email)
activate ro_RegistoOrganizacoes
deactivate ro_RegistoOrganizacoes

CTRL -> o_Organizacao: 2.1.4 rt=getRegistoTarefas()
activate o_Organizacao
deactivate o_Organizacao

CTRL -> rc_RegistoCategorias: 2.1.5 cat=getCategoria(catCod)
activate rc_RegistoCategorias
deactivate rc_RegistoCategorias

CTRL -> o_Organizacao: 2.1.6 rc=getRegistoColaboradores()
activate o_Organizacao
deactivate o_Organizacao

CTRL -> rc_RegistoColaboradores: 2.1.7 colab=getColaboradorByEmail(email)
activate rc_RegistoColaboradores
deactivate rc_RegistoColaboradores

CTRL -> rt_RegistoTarefas: 2.1.8 t=novaTarefa(ref, designacao, descrInformal, descrTecnica, duracao, custo, cat, colab)
activate rt_RegistoTarefas

rt_RegistoTarefas --> t_Tarefa: 2.1.8.1 create(ref, designacao, descrInformal, descrTecnica, duracao, custo, cat, colab)
activate t_Tarefa
deactivate t_Tarefa
rt_RegistoTarefas -> rt_RegistoTarefas: 2.1.8.2 valida(t)
deactivate rt_RegistoTarefas

deactivate CTRL

Colaborador -> UI: 3 confirma
activate UI

UI -> CTRL: 3.1 registaTarefa()
activate CTRL
UI --> Colaborador: 3.2 Informa operação bem sucedida
deactivate UI
CTRL -> rt_RegistoTarefas: 3.1.1 registaTarefa(t)
deactivate CTRL

activate rt_RegistoTarefas
rt_RegistoTarefas -> rt_RegistoTarefas: 4 valida(t)
rt_RegistoTarefas -> rt_RegistoTarefas: 5 add(t)


@enduml_sd_uc6